<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="signup.css">
    <title>Sign-up</title>
    <style>
     
    </style>
</head>
<body class="background">
    <h2 class="heading-line">WELCOME TO TRIPZIE
        <br>REGISTER HERE..
    </h2>
    <div id="parent">
        <form id="form" method="post">
            <input placeholder="Enter username" type="text" id="username">
            <br><br>
            <input placeholder="Enter Email" type="text" id="mail">
            <br><br>
            <input placeholder="Enter Password" type="text" id="pass"/>
            <br><br>
            <input placeholder="Enter age" type="text" id="age">
            <p>OR</p>
            <div class="ion-logo">
                <div><ion-icon name="logo-facebook"></ion-icon></div>
                <div><ion-icon class="ion" name="logo-google"></ion-icon></div>
                <div><ion-icon name="logo-apple"></ion-icon></div>
            </div>
           
            <input id="con" type="submit" value="Continue"/>
            <P>Already a member?
                <a href="login.html">Sign in</a>
            </P>
        </form>
    </div>
</body>
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</html>

<script>

let registerBtn = document.querySelector("#form")
registerBtn.addEventListener("submit",registerUser);

async function registerUser(event){
    try {
        event.preventDefault()
    let registerData = document.querySelectorAll("#form input")
    let userobj={
        username:form.username.value,
        email:form.mail.value,
        pass:form.pass.value,
        age:form.age.value
    }
    
    let registerRequest = await fetch("http://localhost:4500/user/register",{
        method:"POST",
        headers:{
            "content-type":"application/json",
        },
        body:JSON.stringify(userobj)
    })
    if(registerRequest.ok){
        alert("User has been registered!")
        console.log({"msg":"Registration successfull"})
        window.location.href="login.html"
    }
    } catch (error) {
        console.log(error)
    }
}

</script>
